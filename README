About
-----
DVBStreamer is an console based application to stream an entire DVB service
over UDP.
It differs from other DVB streaming applications by the use of the DVB-SI to
work out the PIDs to stream and correctly stream services which use a separate
PCR PID.

Requirements
------------
DVBStreamer requires the following libraries:
sqlite3 (http://www.sqlite.org/)
dvbpsi  (http://developers.videolan.org/libdvbpsi/)

Installation
------------
Before building dvbstreamer you will need the latest version of the following
packages:

libdvbpsi
sqlite3

Now download and extract the latest source from the sourceforge download page

Once you've done that the next thing to do is run configure to setup the
makefile, to do this enter the following at the command prompt (add any options
 you would normal add when building using configure)

./configure

When configure has finished and created all the make files its just a matter of
 running make to build the application

make

Once make has finished doing its thing the next step is installing dvbstreamer
to you chosen location. You will probably want to do this step as root

make install


Setup
-----
Before you can actually start to use dvbstreamer you need to initialise it's
database of service to do this you'll need a channels.conf file produces by the
 linuxtv.org utility scan. Go here if you need help with scan.

When you have a channels.conf file you then need to start dvbstreamer with the
-t option specifying the file you've just created. The information in the
channels.conf file is expected to be for a terrestrial tuner.

To start dvbstream sending packets to UDP port 1234 on the local machine and
initialise the database using channels.conf file in the current directory use
the following

dvbstream -o udp://localhost:1234 -t channels.conf

To find out what services have been imported use the lsservices command which
will list all the available service

dvbstream> lsservices

To quit out of dvbstreamer type quit

dvbstream> quit

One point to note is that each dvb adapter has its own database, thus meaning
that once dvbstreamer supports cable and satellite cards you could use
dvbstreamer on 2 or more different cards with out problems

If you have 2 or more cards of the same type in your system you can link the
first cards database to the second cards database by simply creating a hard
link in the dvbstreamer directory in your home directory ~/.dvbstreamer

for example to use the same database for card 1 and 2 you would do the following

ln ~/.dvbstreamer/adapter1.db ~/.dvbstreamer/adapter2.db


Running
-------
To start dvbstreamer you need to specify an IP address and a UDP port where the
selected service will be streamed to. You can also optionally specify which
adapter to use using the -a option.

For example to start dvbstreamer using adapter 2 and send the selected service
to 192.168.1.1 and UDP port 1234 you would use the following command

dvbstreamer -a 2 -o 192.168.1.1:1234

Once dvbstreamer has started you have the following commands at your disposal:

Command			Description
-------------------------------------------------------------------------------
      quit - Exit the program
lsservices - List all services or for a specific multiplex.
   lsmuxes - List multiplexes
    select - Select a new service to stream
   current - Print out the service currently being streamed.
      pids - List the PIDs for a specified service
     stats - Display the stats for the PAT,PMT and service PID filters
 addoutput - Add a new destination for manually filtered PIDs.
  rmoutput - Remove a destination for manually filtered PIDs.
 lsoutputs - List current outputs
setoutputmrl - Set the output's MRL
    addpid - Adds a PID to filter to an output
     rmpid - Removes a PID to filter from an output
    lspids - List PIDs for output
     addsf - Add a service filter for secondary services
      rmsf - Remove a service filter for secondary services
     lssfs - List all secondary service filters
     setsf - Select a service to stream to a secondary service output
  setsfmrl - Set the service filter's MRL
  festatus - Displays the status of the tuner.
      help - Display the list of commands or help on a specific command
 lsplugins - List loaded plugins.
plugininfo - Display the information about a plugin

Start up files
--------------
Start up files can be useful for doing things that you always want to be setup
before you get to the dvbstreamer prompt. For example you may always want the
TDT and EIT tables redirected to a specific UDP port on your local computer.

To use a startup file simple add the -f option on the command line specifying
the file to read.

For example to use the file eitredirect to redirect EIT tables to port 1235 on
your local computer you would use the following:

dvbstreamer -o udp://localhost:1234 -f eitredirect

And in eitredirect you would have

# Redirect EIT tables to port 1235 on localhost
addoutput eitoutput localhost:1235
addpid eitoutput 0x12

Its as simple as that, you can use all the commands that you can use on the
dvbstreamer prompt.

Daemon mode and DVBCtrl
-----------------------
This program allows you to control dvbstreamer when it is running in daemon
mode. To start dvbstreamer in daemon mode use the '-d' option. It is also
recommend to change the default username and password used to prevent someone
else changing the channel. To change the default username and password
(dvbstreamer, control) use the '-u <username>' and '-p <password>' options.
For example:

dvbstreamer -d -u adam -p alkhluln -o null://

Then to control dvbstreamer you'll need to use dvbctrl. DVBCtrl allows you to
use all of the commands available on the command line interface. Simple add the
command after dvbctrl to execute that command. Some commands require a username
and password to execute.
For example to set the default service use:

dvbctrl -u adam -p alkhluln select "BBC ONE"

Note the use of quotes to pass BBC ONE as 1 command line parameter!

Use -h for more details on available commands and options.

Plugins
-------
Plugins allow DVBStreamer to be extended beyond the simple filtering and
streaming of DVB services.

Plugins can:
    - Add new delivery methods (check out fileoutput.c for a simple example of a
      delivery method plugin)
    - Add new commands.
    - Add new PID filters (for example to extract EPG data)
    - Detect when the service/multiplex is changed.

The commands lsplugins and plugininfo can be used to inspected the loaded plugins.

Documentation for the interfaces into DVBStreamer can be generated using the
doxygen and the doxygen.config file in the base directory of dvbstreamer.


Bugs
----
Please report all bugs to the sourceforge forums.
http://sourceforge.net/tracker/?group_id=164687&atid=832723

Credits
-------
Adam Charrett - Author
Tero Pelander - IPv6 support along with several patches and tested DVB-C.
Thomas Sattle - Lots of testing for 0.5.
Nicholas Humfrey - Power PC testing and patch.

History
-------
0.5 Plugin Release
0.4 Daemon mode
0.3 Service Addition/Removal
0.2 Add new commands (addoutput etc)
0.1 First public release
